## Network

#### Какой протокол используется для ...

* TCP обеспечения контроля потока и передачи данных
* ARP преобразования логического адреса в физические адреса
* CSMA/CA избежания лизий внутри физических сетей
* SSH удаленного управления компьютерами в зашифрованном виде
* DHCP назначения сетевой конфигурации сетевым устройствам
* RSH удаленного управления компьютерами в незашифрованном виде
* UDP реализации взаимодействие без установления соединения
* DNS преобразования доменного имени в логический адрес
* FTP скачивания и выгрузки файлы в незашифрованном видa
* SMTP доставки почты
* ICMP обмена диагностической информацией и поиск проблем связности сети
* STP сведения сети к дереву без петель

---

#### Альтернативное название топологии с полной связанностью:

mesh

#### В сетевой модели OSI, маршрутизация обеспечивается на:

сетевом уровне

#### Каким образом можно обеспечить доступ к инстансу находящимся за NAT из интернета?

#TODO

#### Сколько широковещательных доменов на приведенной ниже диаграмм и сколько необходимо выделить подсетей для работы данной сети?

На топологии сети можно увидеть 3 коммутатора(switch), которые создают широковещательные домены, далее 2 концентратора(hub), которые создают как домены коллизий так и широковещательные домены и маршрутизатор, который разделяет домены коллизий и широковещательные домены.
Поэтому широковещательных доменов 5.
И так как мы видим четыре порта исходящих из маршрутизатора, то можно утверждать, о необходимости выделения 4 подсетей.

![](https://github.com/NastyaP1/quantori-devops-school/blob/master/Tests/resources/Testing1_1.png)

#### Вы проектируете онлайн игру. В ней имеется встроенный голосовой чат между игроками. Сетевой траффик чата не должен влиять на основной игровой процесс. Функция чата не должна влиять на основной игровой процесс.
○ Какой сетевой протокол вы выберете для реализации чата: TCP или UDP? Поясните решение
○ Какую сетевую модель вы выберете для реализации чата: клиент-сервер или peer-to-peer? Поясните решение
○ В игре существуют миссии, где скорость коммуникации важнее, чем в обычном игровом процессе. Какие настройки можно предусмотреть, чтобы влиять на скорость и качество чата? Поясните варианты (вопрос со звездочкой, можно пропустить)

# TODO

#### Опишите принцип работы HTTPS протокола

У каждой стороны (браузер-сервер) есть свой ключ , пара приватных и публичных. Данные которые зашифрованы публичным ключом одной стороны могут быть расшифрованы только с помощью ее же приватного ключа.
Ключ сессия это ключ с помощью которого шифруются данные и расшифрованы они могут быть только с использованием этого ключа.

Если мы отправляем запрос через https, то процесс состоит из двух частей: рукопожатия - ассиметричное шифрование - процесс между браузером и сервером установления подлинности и bp обмена данными - симметричное шифрование. То есть https это http+ssl/ttl - http с прослойкой секьюрности.

Существуют криптографические центры которые занимаются подтверждением что ключи шифрования подлинны. То есть сервер (сайт) изначально обращается к крипто центру, с желанием стать https. Перед этим сервер локально генерит пару своих приватных-публичных ключей ( ssh-keygen) . Далее отправляет их в крипто центр и просит их подписать - запрос на то, чтобы его сертификаты были подписаны. Крипто центр проверяет их, подписывает с помощью своего приватного ключа и любой у кого есть его( от крипто центра) публичный ключ может проверить, что именно этот крипто центр подписал сертификат. 
Теперь когда сервер имеет эту подписку: браузер обращается к серверу, который ему отвечает, что у меня есть сертификат, он подписан вот таким то крипто центром. У браузера в свою очередь есть список крипто центров и их публичных ключей которым он доверяет, поэтому он проверяет, правда ли что публичные ключи сервера и крипто центра совпдают. 
Если все ок, то браузер доверяет серверу и создаёт некий секретный ключ ( сессионный ключ) с помощью которого сервер и браузер будут шифровать сообщения между собой(симметричное шифрование). Этот сессионный ключ браузер шифрует с помощью публичного ключа сервера, о котором упоминалось в самом начале. И передаёт зашифрованный сессионный ключ серверу. 
Таким образом в дальнейшем сервер и браузер общаются между собой с помощью симметричного шифрования, а сообщения шифруют сессионным ключом.

#### В компании разрабатывают внутренний портал и HTTPS сертификат для него находится в стадии выпуска центром сертификации. Какое временное решение можно использовать, чтобы работать с порталом по протоколу HTTPS в ожидании выпуска сертификата? Поясните решение
○ После получения сертификата и открытия доступа к порталу стали поступать жалобы от пользователей, что при входе на портал без www все работает нормально, а при входе с www выдается сообщение, что HTTPS сертификат недействителен для этого сайта.
○ В чем может быть проблема? 
○ Как ее можно решить?

#### Получите все DNS записи для домена yandex.ru. Опишите назначение каждого из типов записей в ответе

для того чтобы получить все DNS записи для домена можно воспользоваться несколькими командами: `dig yandex.ru any`, `nslookup -type=any yandex.ru`, `host -a yandex.ru`

Рассмотрим `dig yandex.ru any`, результат вывода команды и назначение каждого из типов записей в ответе.

Dig команда дает много информации в выводе: установленная версия dig и запрос, который был вызван, глобальные параметры, технических сведениях об ответе, полученном от DNS-сервера, информация об IP-адресах авторитетных DNS-серверов, а так же в конце статистика запроса.

Но более всего интересуют следующие два раздела: 
Секция с нашим запросом: в нашем случае запрос будет выглядеть так:
```
;; QUESTION SECTION:

;yandex.ru.	IN	ANY         <--- то есть дай мне все DNS записи

```

И уже Раздел ANSWER который дает ответ на наш запрос:

```
;; ANSWER SECTION:
yandex.ru.		133	  IN	AAAA	2a02:6b8:a::a
yandex.ru.		263	  IN	A	    77.88.55.55
yandex.ru.		263	  IN	A	    77.88.55.50
yandex.ru.		263	  IN	A	    5.255.255.5
yandex.ru.		263	  IN	A	    5.255.255.50
yandex.ru.		5751  IN	NS	    ns1.yandex.ru.
yandex.ru.		5751  IN	NS	    ns2.yandex.ru.
yandex.ru.      5751  IN    NS      ns9.z5h64q92x9.net.

```

В четвертой колонке мы видим различный типы записей AAAA, A и NS. Рассмотрим каждую из них:

```

A-запись — хранит имя хоста и соответствующий ему адрес IPv4
NS-запись - хранит авторитетные серверы имен для конкретного домена
AAAA-запись — хранит имя хоста и соответствующий ему адрес IPv6

```

#### После подключения Интернета и телевидения в квартиру Феофан отметил, что стабильность работа оставляет желать лучшего (лаги в онлайн играх, подвисание ТВ картинки, кратковременные перерывы в работе интернета). Опишите все возможные причины и способы их устранения

# TODO

## Linux

#### Вам нужно дать новому пользователю execute доступ к файлу, на файле 754. Как это можно сделать без изменения разрешений на файле?

права подразделяются на группы трёх типов:


группа Owner – «Владелец папки или файла»
группа Group – «Член группы владельца папки или файла»
группа World или Public – «Все остальные пользователи»

На данном этапе пользователь относится к группе «Все остальные пользователи».

У файла есть следующие права - 754, эквивалентно rwx-rx – r. Это значит, что владелец файла имеет все права, группа – на чтение и выполнение, остальные – только на чтение.

Поэтому мы можем сделать нового пользователя членом группы владельца файла и таким образом дадим ему доступ на исполнение файла, без изменений прав самого файла.

Команда для добавления пользователя к группе:

```

sudo usermod -aG <group> <username>

```

#### Вам нужно запустить один скрипт, а пока он выполняется посмотреть потребление ресурсов с помощью ps. Вы не хотите открывать два окна консоли, чтоб запустить в каждом по команде. Что можно сделать?

Запустим shell скрипт с оператором управления & , чтобы shell выполнил команду в фоновом режиме в подоболочке. Т.е. shell не будет ждать завершения одной команды, чтобы приступить к выполнению второй.

```
nohup bash test.sh & ps

```

#### Вы подняли API на http://someapi.com. Нужно отправить к API различные запросы. Какой самый простой способ это сделать?

При помощи команды curl можно делать тестирование API-запросов

```
GET:
curl https://someapi.com/pages?userId=1

POST:
curl -X POST -H "Content-Type: application/json" \    -d '{"userId": 5, "title": "Hello World", "body": "Post body."}' \    https://someapi.com/pages

DELETE:
curl -X DELETE https://example.com/pages

PUT:
curl -X PUT -d "userId=5&title=Hello World&body=Post body." https://someapi.com/pages

```

сurl так же поддерживает передачу API-запросов, требующих авторизации.

#### Напишите regex, который из всех чисел в списке ( 0268 10215 22222 2021 2022 2413 2222 00000 2468) выберет только четырехзначные числа, состоящие из четных цифр (допускается, что последний и первый символы в строке - пробелы).

```
echo " 0268 10215 22222 2021 2022 2413 2222 00000 2468"| egrep "( |^)[02468]{4}( |$)"

```

результат выполнения команды:

![](https://github.com/NastyaP1/quantori-devops-school/blob/master/Tests/resources/Testing1_2.png)

#### Вам нужно залить в БД дамп, который находится на вашей локальной машине. Доступ к серверу с БД (hostname2) есть только с hostname1. К hostname1 есть доступ по SSH. Как можно решить задачу?

При помощи команды scp скопируем дамп, находящийся на нашем локальном сервере на hostname1 сервер в домашнюю директорию. Далее через ssh подключаемся к машине 1 и используем dump команду для определенной базы данных.
Например для постгреса можем использовать pg_restore команду, где в качестве -h параметра передадим hostname2 - второй сервер для развёртки базы данных.

```
scp dump.tar user@hostname1:~/
ssh user@hostname1
pg_restore -h hostname2 -U user -d dbname ~/dump.tar     <--- команда ресторинга специфичная для конкретной БД

```

#### Вам надоело опечатываться и вы хотите, чтобы когда вы ошибаетесь в команде ls (sl, la, sls, lss, ssl) все равно вызывался ls. Как это можно сделать?

Для этого существуют alias команда, которая используется для создания альтернативных версий обычных команд, присваивая им новые названия.

Таким образом мы можем создать на каждый вариант sl, la, sls, lss, ssl alias который будет являться альтернативной командой для ls.

```
alias alias_command_name='commands'

или

alias sl=ls
alias la=ls   

```

#### У вас есть некий скрипт script.sh. Нужно запустить скрипт и записать обычные логи с него в logs.txt, а ошибки в errors.txt. Напишите команду для этого

Существует три вывода:
* 0 - консольный ввод
* 1 - стандартный вывод результата отработки файла
* 2 - вывод ошибок

Поэтому 1> или > эквивалентно выводу результата отработки файла 
А для того, чтобы ошибки не выводились в терминал необходимо указать 2>, то есть перенаправить вывод ошибок в требуемый файл.

```

./script.sh >logs.txt 2>errors.txt

```

#### В /etc/hosts написано. Какой эффект от каждой строки? Зачем могли понадобиться последние две строки?

```

127.0.0.1 localhost
::1 localhost
127.0.0.1 example.com
44.195.240.23 example2.com

```

Файл /etc/hosts содержит сопоставление некоторых имен хостов с IP-адресами. При отсутствие имени сервера любая сетевая программа обратится к этому файлу, чтобы определить IP-адрес, соответствующий имени хоста, прежде чем она обратиться к DNS. То есть разрешение DNS вообще не будет выполняться.

В первой колонке находится адрес куда перенаправить. Во втором столбце адрес, который мы хотим перенаправить, третья часть с комментариями отсутствует.

То есть в первой строке мы говорим , что наша локальная машина будет работать на 127.0.0.1 сервере - т.е. перенаправляй все на заданный IP. Вторая запись аналогична работе первой, только в IPv6 виде , где ::1 эквивалентно 127.0.0.1.

Разберем две последние строки. 
Например, наш прод находится на сервере 44.195.240.23, а пользовательский домен, который мы хотим использовать - это example2.com. Если мы добавим эту запись, то каждый раз, как мы будем посещать example2.com браузер будет перенаправлять в среду нашего прода, а не на веб-сайт, DNS-запись которого example2.com. 
127.0.0.1 example.com эта же запись говорит о том, что мы перенаправимся с example.com на локальную машину.

#### Load average 10,5,2 - это хорошо или плохо? Почему?

Мы получаем три значения load average для промежутков в 1, 5 и 15 минут.В этом отношении временные значения load average представляют собой не время, за которое посчитали среднее значение, а период времени относительно которого проводится усреднение.
Можно сказать, что La 1 представляет собой недавнее прошлое (несколько минут назад), La 5 прошлое (полчаса-час) и La 15 отдаленное прошлое (несколько часов).
Стоит отметить, что значения load average откорректированы пропорционально числу ядер. Поэтому, так как в нашем задании Load average 10,5,2, то предположим, что у нас десяти-ядерный процессор.

* Если значения равны 0.0, то система в состоянии простоя. 
* Если среднее значение для 1 минуты выше, чем для 5 или 15, то нагрузка растёт. 
* Если среднее значение для 1 минуты ниже, чем для 5 или 15, то нагрузка снижается. 
* Если значения нагрузки выше, чем количество процессоров, то у вас могут быть проблемы с производительностью (в зависимости от ситуации).

Такие данные "Load average 10,5,2” говорят о том, что имеет место достаточно кратковременный (около десятка минут) всплеск нагрузки, при этом вычислительных ресурсов пока достаточно. Но если в дальнейшем La 5 (второе значение) будет расти, а за ним и La 15 (третье значение), то система начнет испытывать значительные нагрузки.

#### Какой-то сервис работал на сервере длительное время, а потом перестал. Приложение не может записать данные в файл и выдает ошибку. Команда df показывает, что свободного места на диске достаточно. В чем может быть причина ошибок приложения?

Скорее всего, есть некоторые запросы, которые создают большие временные файлы, которые временно заполняют жесткий диск. Эти файлы будут удалены, как только запрос будет выполнен (или не удален), поэтому в файловой системе достаточно свободного места, когда мы смотрим через команду df.

Если временные файлы не являются проблемой, возможно ,в случае баз данных это создание временных таблиц. Они автоматически удаляются по окончании сеанса работы с базой данных. 

Другой возможностью могут быть файлы, созданные чем - то другим, чем база данных. Или, например, df не отображает информацию о не смонтированных дисках. Вероятно, есть файлы, скрытые под точкой монтирования. То есть в таком случае, например,  для приложения httpd нужно сделать umount/applis/apache и уже после этого смотреть дисковое пространство.

